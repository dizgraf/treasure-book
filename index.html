<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ü–æ–∏—Å–∫ –∫–ª–∞–¥–∞</title>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ä–∞—Ç—Å–∫–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ -->
  <link href="https://fonts.googleapis.com/css2?family=Pirata+One&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      background: linear-gradient(#e7f4ff, #cfe9ff);
      color: #10324a;
      font-family: "Fredoka", Arial, sans-serif;
      text-align: center;
    }

    h1 {
      font-family: 'Pirata One', cursive;
      font-size: 64px;
      color: gold;
      text-shadow: 3px 3px 5px black;
      margin: 20px 0;
    }

    #map {
      position: relative;
      width: 800px;
      height: 800px;
      margin: 20px auto;
      background: url("images/treasure-map.png") center/cover no-repeat;
      border: 6px solid #fff;
      border-radius: 16px;
      box-shadow: 0 6px 18px rgba(0,0,0,.15);
    }

    .level {
      position: absolute;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 4px solid white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      background: gray;
      color: white;
      transition: transform .2s;
      box-shadow: 0 6px 18px rgba(0,0,0,.15);
    }

    .level.active { background: gold; color: black; }
    .level:hover { transform: scale(1.1); }

    .page { display: none; }
    .silhouette {
      width: 200px;
      margin: 20px auto;
      filter: grayscale(100%) brightness(50%);
    }

    .options img {
      width: 120px;
      margin: 10px;
      cursor: pointer;
      border: 3px solid transparent;
      border-radius: 10px;
      transition: transform 0.2s;
    }
    .options img:hover { border-color: yellow; transform: scale(1.1); }

    .message { font-size: 24px; margin-top: 20px; }
    button {
      padding: 10px 20px;
      font-size: 18px;
      margin-top: 20px;
      cursor: pointer;
      border-radius: 10px;
      border: none;
      background: #ffcc00;
      color: #000;
    }

    canvas {
      border: 3px dashed white;
      border-radius: 15px;
      background: #87CEEB;
      margin-top: 20px;
    }

    /* üéÜ –§–µ–π–µ—Ä–≤–µ—Ä–∫ */
    .firework {
      position: absolute;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: yellow;
      animation: explode 1s linear infinite;
    }
    @keyframes explode {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(10); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>–ü–æ–∏—Å–∫ –∫–ª–∞–¥–∞</h1>

  <!-- –ö–∞—Ä—Ç–∞ -->
  <div id="map">
    <div class="level active" id="level1" style="top:50px; left:100px;" onclick="openLevel(1)">1</div>
    <div class="level" id="level2" style="top:200px; left:250px;" onclick="openLevel(2)">2</div>
    <div class="level" id="level3" style="top:350px; left:400px;" onclick="openLevel(3)">3</div>
    <div class="level" id="level4" style="top:150px; left:550px;" onclick="openLevel(4)">4</div>
    <div class="level" id="level5" style="top:300px; left:700px;" onclick="openLevel(5)">5</div>
    <div class="level" id="level6" style="top:100px; left:300px;" onclick="openLevel(6)">6</div>
    <div class="level" id="level7" style="top:250px; left:450px;" onclick="openLevel(7)">7</div>
    <div class="level" id="level8" style="top:400px; left:600px;" onclick="openLevel(8)">8</div>
    <div class="level" id="level9" style="top:200px; left:700px;" onclick="openLevel(9)">9</div>
    <div class="level" id="level10" style="top:350px; left:100px;" onclick="openLevel(10)">10</div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —É—Ä–æ–≤–Ω—è -->
  <div id="gameScreen" class="page">
    <h2 id="levelTitle"></h2>
    <div id="taskContainer"></div>
    <div id="message" class="message"></div>
    <button id="nextBtn" style="display:none;" onclick="completeLevel()">–î–∞–ª—å—à–µ</button>
  </div>

  <!-- –§–∏–Ω–∞–ª -->
  <div id="finalScreen" class="page">
    <h2>üéâ –¢—ã –Ω–∞—à—ë–ª –∫–ª–∞–¥! üéâ</h2>
    <img src="images/treasure-chest.png" width="300" alt="–°—É–Ω–¥—É–∫ —Å –∑–æ–ª–æ—Ç–æ–º">
    <p>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –æ—Ç–≤–∞–∂–Ω—ã–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å!</p>
    <audio id="victorySound" src="sounds/victory.mp3"></audio>
  </div>

  <script>
    let currentLevel = 1;

    function openLevel(level) {
      if (document.getElementById("level" + level).classList.contains("active")) {
        currentLevel = level;
        document.getElementById("map").style.display = "none";
        document.getElementById("gameScreen").style.display = "block";
        document.getElementById("levelTitle").textContent = "–£—Ä–æ–≤–µ–Ω—å " + level;
        loadTask(level);
      }
    }

    function loadTask(level) {
      const task = document.getElementById("taskContainer");
      task.innerHTML = "";
      document.getElementById("message").textContent = "";
      document.getElementById("nextBtn").style.display = "none";

      // --- –£—Ä–æ–≤–µ–Ω—å 1: —Ä—ã–±–∫–∞ ---
      if (level === 1) {
        task.innerHTML = `
          <h3>–ö—Ç–æ –∂–∏–≤—ë—Ç –≤ –º–æ—Ä–µ?</h3>
          <img src="images/silhouette-fish.png" class="silhouette">
          <div class="options">
            <img src="images/octopus.png" onclick="checkAnswer(false)">
            <img src="images/fish.png" onclick="checkAnswer(true)">
            <img src="images/starfish.png" onclick="checkAnswer(false)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 2: –¥–µ–ª—å—Ñ–∏–Ω ---
      if (level === 2) {
        task.innerHTML = `
          <h3>–ù–∞–π–¥–∏ –¥–µ–ª—å—Ñ–∏–Ω–∞</h3>
          <img src="images/silhouette-dolphin.png" class="silhouette">
          <div class="options">
            <img src="images/turtle.png" onclick="checkAnswer(false)">
            <img src="images/crab.png" onclick="checkAnswer(false)">
            <img src="images/dolphin.png" onclick="checkAnswer(true)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 3: –∫—Ä–∞–± ---
      if (level === 3) {
        task.innerHTML = `
          <h3>–ö—Ç–æ –ø—Ä—è—á–µ—Ç—Å—è –Ω–∞ –¥–Ω–µ?</h3>
          <img src="images/silhouette-crab.png" class="silhouette">
          <div class="options">
            <img src="images/seahorse.png" onclick="checkAnswer(false)">
            <img src="images/crab.png" onclick="checkAnswer(true)">
            <img src="images/fish.png" onclick="checkAnswer(false)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 4: —á–µ—Ä–µ–ø–∞—Ö–∞ ---
      if (level === 4) {
        task.innerHTML = `
          <h3>–ù–∞–π–¥–∏ —á–µ—Ä–µ–ø–∞—Ö—É</h3>
          <img src="images/silhouette-turtle.png" class="silhouette">
          <div class="options">
            <img src="images/starfish.png" onclick="checkAnswer(false)">
            <img src="images/turtle.png" onclick="checkAnswer(true)">
            <img src="images/octopus.png" onclick="checkAnswer(false)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 5: —Å–µ–∫—Ä–µ—Ç–Ω—ã–π ---
      if (level === 5) {
        task.innerHTML = `
          <h3>–°–µ–∫—Ä–µ—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å! –û–±–≤–µ–¥–∏ –º–æ—Ä—Å–∫–æ–≥–æ –∫–æ–Ω—å–∫–∞</h3>
          <canvas id="drawCanvas" width="400" height="400"></canvas>
          <br>
          <button onclick="checkDrawing()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        `;
        const canvas = document.getElementById("drawCanvas");
        const ctx = canvas.getContext("2d");
        let drawing = false;
        let userPath = [];
        const guideImg = new Image();
        guideImg.src = "images/seahorse-outline.png";
        guideImg.onload = () => ctx.drawImage(guideImg, 50, 20, 300, 350);
        canvas.addEventListener("mousedown", () => { drawing = true; userPath = []; });
        canvas.addEventListener("mouseup", () => drawing = false);
        canvas.addEventListener("mousemove", e => {
          if (!drawing) return;
          const rect = canvas.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          userPath.push({x,y});
          ctx.fillStyle = "yellow";
          ctx.beginPath();
          ctx.arc(x, y, 3, 0, Math.PI*2);
          ctx.fill();
        });
        window.checkDrawing = function() {
          if (userPath.length > 80) {
            document.getElementById("message").textContent = "–û—Ç–ª–∏—á–Ω–æ! –ö–æ–Ω—ë–∫ –≥–æ—Ç–æ–≤!";
            document.getElementById("nextBtn").style.display = "inline-block";
          } else {
            document.getElementById("message").textContent = "–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!";
          }
        }
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 6: –º–æ—Ä—Å–∫–∞—è –∑–≤–µ–∑–¥–∞ ---
      if (level === 6) {
        task.innerHTML = `
          <h3>–ö—Ç–æ –∑–≤–µ–∑–¥–∞ –º–æ—Ä–µ–π?</h3>
          <img src="images/silhouette-starfish.png" class="silhouette">
          <div class="options">
            <img src="images/starfish.png" onclick="checkAnswer(true)">
            <img src="images/fish.png" onclick="checkAnswer(false)">
            <img src="images/dolphin.png" onclick="checkAnswer(false)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 7: –æ—Å—å–º–∏–Ω–æ–≥ ---
      if (level === 7) {
        task.innerHTML = `
          <h3>–ù–∞–π–¥–∏ –æ—Å—å–º–∏–Ω–æ–≥–∞</h3>
          <img src="images/silhouette-octopus.png" class="silhouette">
          <div class="options">
            <img src="images/octopus.png" onclick="checkAnswer(true)">
            <img src="images/turtle.png" onclick="checkAnswer(false)">
            <img src="images/seahorse.png" onclick="checkAnswer(false)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 8: —Ä—ã–±–∫–∞ —Å–Ω–æ–≤–∞ ---
      if (level === 8) {
        task.innerHTML = `
          <h3>–ö—Ç–æ –ø–ª–∞–≤–∞–µ—Ç —Ä—è–¥–æ–º?</h3>
          <img src="images/silhouette-fish.png" class="silhouette">
          <div class="options">
            <img src="images/fish.png" onclick="checkAnswer(true)">
            <img src="images/crab.png" onclick="checkAnswer(false)">
            <img src="images/starfish.png" onclick="checkAnswer(false)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 9: –º–æ—Ä—Å–∫–æ–π –∫–æ–Ω—ë–∫ ---
      if (level === 9) {
        task.innerHTML = `
          <h3>–ù–∞–π–¥–∏ –º–æ—Ä—Å–∫–æ–≥–æ –∫–æ–Ω—å–∫–∞</h3>
          <img src="images/seahorse-outline.png" class="silhouette">
          <div class="options">
            <img src="images/seahorse.png" onclick="checkAnswer(true)">
            <img src="images/octopus.png" onclick="checkAnswer(false)">
            <img src="images/turtle.png" onclick="checkAnswer(false)">
          </div>`;
      }

      // --- –£—Ä–æ–≤–µ–Ω—å 10: —Ñ–∏–Ω–∞–ª ---
      if (level === 10) {
        document.getElementById("gameScreen").style.display = "none";
        document.getElementById("finalScreen").style.display = "block";
        document.getElementById("victorySound").play();
        launchFireworks();
      }
    }

    function checkAnswer(correct) {
      const msg = document.getElementById("message");
      const nextBtn = document.getElementById("nextBtn");
      if (correct) {
        msg.textContent = "–ú–æ–ª–æ–¥–µ—Ü!";
        nextBtn.style.display = "inline-block";
      } else {
        msg.textContent = "–ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑!";
      }
    }

    function completeLevel() {
      document.getElementById("gameScreen").style.display = "none";
      document.getElementById("map").style.display = "block";
      let nextLevel = currentLevel + 1;
      if (document.getElementById("level" + nextLevel)) {
        document.getElementById("level" + nextLevel).classList.add("active");
      }
    }

    // üéÜ –§–µ–π–µ—Ä–≤–µ—Ä–∫
    function launchFireworks() {
      for (let i = 0; i < 20; i++) {
        let fw = document.createElement("div");
        fw.className = "firework";
        fw.style.left = Math.random() * window.innerWidth + "px";
        fw.style.top = Math.random() * window.innerHeight + "px";
        document.body.appendChild(fw);
        setTimeout(() => fw.remove(), 1000);
      }
      setTimeout(launchFireworks, 1500);
    }
  </script>
</body>
</html>
